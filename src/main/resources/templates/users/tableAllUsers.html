<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:v-on="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org" xmlns:v-bind="http://www.w3.org/1999/xhtml"
      lang="en">


<head>
    <title>PhotoPond - table with all users</title>
    <!-- Required meta tags -->
    <meta charset="UTF-8">

    <title>PhotoPond - main page</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="../../static/css/photopond.css">
</head>

<body>
<div id="usersApp">
    <users-table inline-template
                 th:fragment="tableAllUsers" th:remove="tag">

        <div class="container-fluid">
            <div class="row">
                <table class="table table-sm h-100">
                    <thead class="thead-dark">
                    <tr class="d-flex">
                        <th class="col-md-1 offset-md-1 col-1 text-center">
                            <div class="d-flex" v-on:click="sortBy('id')" style="cursor: pointer;">
                                <span>id</span>
                                <i class="textArrow fa"
                                   :class="{'fa-arrow-up' : isAsc, 'fa-arrow-down' : isDesc}"
                                   v-if="isSortedByField('id')"></i>
                            </div>
                        </th>
                        <th class="col-md-4 col-5 text-center">
                            <div class="d-flex" v-on:click="sortBy('login')" style="cursor: pointer;">
                                <span th:text="#{user.login}">Login</span>
                                <i class="textArrow fa"
                                   :class="{'fa-arrow-up' : isAsc, 'fa-arrow-down' : isDesc}"
                                   v-if="isSortedByField('login')"></i>
                            </div>
                        </th>
                        <th class="col-md-3 col-3 text-center">
                            <div class="d-flex" v-on:click="sortBy('role')" style="cursor: pointer;">
                                <span th:text="#{user.role}">Role</span>
                                <i class="textArrow fa"
                                   :class="{'fa-arrow-up' : isAsc, 'fa-arrow-down' : isDesc}"
                                   v-if="isSortedByField('role')"></i>
                            </div>
                        </th>
                        <th class="col-md-2 col-3 text-center" th:text="#{admin.allUsers.actions}">Actions</th>
                    </tr>
                    </thead>

                    <tbody name="table-row" is="transition-group">
                    <tr class="d-flex" v-for="(user, key) in sortedUsersList" v-bind:key="user.id">
                        <td class="col-md-1 offset-md-1 col-1">{{ user.id }}</td>
                        <td class="col-md-4 col-5">{{ user.login }}</td>
                        <td class="col-md-3 col-3">{{ user.role }}</td>
                        <td class="col-md-2 col-3 text-center">
                            <div class="btn-group-vertical btn-group-sm">
                                <button type="button" class="btn btn-info btn-sm"
                                        v-on:click="$emit('edit-user', user)"
                                        th:text="#{btn.edit}">
                                    Edit
                                </button>
                                <button type="button" class="btn btn-danger btn-sm"
                                        v-on:click="$emit('delete-user', key)"
                                        th:text="#{btn.delete}">
                                    Delete
                                </button>
                            </div>
                        </td>
                    </tr>

                    </tbody>
                </table>
            </div>
        </div>
    </users-table>
</div>

<!-- jQuery -->
<script src="../../static/libs/jquery/jquery-3.3.1.slim.min.js"></script>

<!-- Bootstrap JS -->
<script src="../../static/libs/popper/popper.1.14.3.min.js"></script>
<script src="../../static/libs/bootstrap/4.1.3/js/bootstrap.min.js"></script>

<!-- Vue.js -->
<script src="../../static/libs/vuejs/vue-2.5.16.js"></script>
<script src="../../static/libs/axios/axios.0.18.0.min.js"></script>
<script src="../../static/libs/lodash/lodash.4.17.10.min.js"></script>

</body>
</html>