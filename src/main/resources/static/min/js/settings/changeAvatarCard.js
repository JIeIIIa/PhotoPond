var changeAvatar=Vue.component("change-avatar-card",{props:[],data:function(){return{showLoader:!1,alert:{messages:[],type:""},imageData:"",imageFile:""}},computed:{hasOldData:function(){return 0===this.imageData.length}},methods:{clearItem:function(a){a.value="";a.errorMsg=""},resolveError:function(a){},resolveResponseErrors:function(a){var b=this;$.isArray(a)?a.forEach(function(a){b.resolveError(a)}):(console.log(a),alert(a))},responseWithError:function(a){422===a.status?(this.alert.messages.push({text:a.data,
code:a.status}),this.alert.type="danger"):this.resolveResponseErrors(a.data)},change:function(){var a=this;a.showLoader=!0;a.clearErrors();axios.put(appendToUrl(location.protocol+"//"+location.host+location.pathname,"password"),{}).then(function(b){200===b.status?(a.alert.messages.push({text:b.data}),a.alert.type="success",a.clearInputs()):a.responseWithError(b);a.showLoader=!1})["catch"](function(b){a.responseWithError(b.response);a.showLoader=!1})},clearErrors:function(){this.alert.messages=[];
this.alert.type=""},closeAlert:function(a){this.clearErrors()},validateImage:function(a){return 0<=$.inArray(a.type,["image/gif","image/jpeg","image/png"])},previewImage:function(a){a=a.target;if(a.files&&a.files[0]){var b=this;if(this.validateImage(a.files[0])){var c=new FileReader;c.onload=function(a){b.imageData=a.target.result};c.readAsDataURL(a.files[0]);b.imageFile=a.files[0]}else b.clearErrors(),b.alert.messages.push({text:$("#choosePictureError").text().trim()}),b.alert.type="danger"}},onChoosePic:function(){$("#avatarImg").click()},
reloadAvatars:function(){var a=$("img[src$\x3d'avatar']"),b=a.attr("src");a.attr("src","");a.attr("src",b)},updateAvatar:function(){console.log("Sending the file to update the avatar...\n");this.clearErrors();var a=new FormData;a.append("avatar",this.imageFile);var b=this,c=$("#changeAvatar").data("change-avatar-url");b.showLoader=!0;axios.post(c,a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){200===a.status?(b.alert.messages.push({text:a.data}),b.alert.type="success",b.imageData=
"",b.imageFile="",b.reloadAvatars()):(console.log("Error uploading avatar (status \x3d "+a.status+")"),b.alert.messages.push({text:a.data}),b.alert.type="danger");b.showLoader=!1})["catch"](function(a){jQuery.isEmptyObject(a.response)||jQuery.isEmptyObject(a.response.status)||(console.log("Error uploading avatar (status \x3d "+a.response.status+")"),b.alert.messages.push({text:a.response.data}),b.alert.type="danger");b.showLoader=!1})},deleteAvatar:function(){console.log("Set the default avatar.\n");
this.clearErrors();var a=this,b=$("#changeAvatar").data("change-avatar-url");a.showLoader=!0;axios["delete"](b).then(function(b){200===b.status?(a.alert.messages.push({text:b.data}),a.alert.type="success",a.imageData="",a.imageFile="",a.reloadAvatars()):(console.log("Error deleting avatar (status \x3d "+b.status+")"),a.alert.messages.push({text:b.data}),a.alert.type="danger");a.showLoader=!1})["catch"](function(b){jQuery.isEmptyObject(b.response)||jQuery.isEmptyObject(b.response.status)||(console.log("Error deleting avatar (status \x3d "+
b.response.status+")"),a.alert.messages.push({text:b.response.data}),a.alert.type="danger");a.showLoader=!1})}}});