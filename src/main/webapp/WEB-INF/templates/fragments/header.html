<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      lang="en">


<head>
    <!-- Required meta tags -->
    <meta charset="UTF-8">

    <title>PhotoPond - main page</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../../../libs/bootstrap/css/bootstrap.css">

    <!--Font Awesome-->
    <link rel="stylesheet" href="../../../libs/font-awesome-free-5.1.1-web/css/all.css">

    <link rel="stylesheet" th:href="@{/css/main.css}">
    <link rel="stylesheet" th:href="@{/css/skins/default-skin.min.css}">
</head>
<body>
<div th:fragment="header(activeItem)" th:remove="tag">
    <div th:replace="fragments/header :: headerWithCustomUrl(${activeItem}, ${#httpServletRequest.requestURI} )"></div>
</div>

<div th:fragment="headerWithCustomUrl(activeItem, url)" th:remove="tag">
    <div class="container-fluid" id="header">
        <div class="row p-0">
            <div class="navbar navbar-toggleable navbar-inverse fixed-top">
                <div class="navbar-header">
                    <a class="navbar-brand pb-0" href="#" th:href="@{/}">
                        <div class="logo">
                            <span class="logo-background"></span>
                            <span class="capitalLetter"><i>P</i></span>
                            <span class="photo"><i>hoto</i></span>
                            <span class="pond"><i>ond</i></span>
                            <span class="circle"></span>
                        </div>
                    </a>
                    <div>&nbsp;</div>
                </div>

                <button class="navbar-toggler navbar-toggler-right h-75" type="button" data-toggle="collapse"
                        data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="true"
                        aria-label="Toggle navigation">
                    <i class="fa fa-bars" aria-hidden="true"></i>
                </button>

                <div class="col offset-md-2 p-0 text-nowrap ">
                    <div class="navbar-inverse collapse navbar-collapse justify-content-end text-center scroll-before-sm" id="navbarSupportedContent">
                        <ul class="nav navbar-nav d-inline-flex align-items-center">
                            <li class="nav-item font-weight-bold mr-sm-2"
                                sec:authorize="isAuthenticated()">
                                <a class="nav-link  font-weight-bold" href="#"
                                   th:classappend="${activeItem} == 'home'?'active':''"
                                   th:href="@{/user/{login}/drive(login=${#authentication.name})}"
                                   th:text="#{header.home}">
                                    Home
                                </a>
                            </li>
                            <li class="nav-item mr-sm-2">
                                <a class="nav-link" href="#"
                                   th:classappend="${activeItem} == 'about'?'active':''"
                                   th:href="@{/about}"
                                   th:text="#{header.about}">About</a>
                            </li>

                            <li class="nav-item mr-sm-2" sec:authorize="isAnonymous()">
                                <a class="btn btn-primary btn-block"
                                   href="#" th:href="@{/login}"
                                   th:text="#{header.logIn}">
                                    Log In
                                </a>
                            </li>

                            <li class="nav-item dropdown mr-sm-2" sec:authorize="isAuthenticated()">
                                <a class="nav-link dropdown-toggle pr-0 py-0 h-100 d-inline-flex align-items-center justify-content-center"
                                   id="userNavbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                    <div class="image-container d-inline-flex align-items-center justify-content-center">
                                        <img src="../../../pic/no_avatar.jpg" th:src="@{/public/user/{login}/avatar(login=${#authentication.name})}">
                                    </div>
                                </a>
                                <ul class="dropdown-menu dropdown-menu-right inverse-dropdown pull-left align-items-center text-left scroll-after-sm"
                                    aria-labelledby="userNavbarDropdownMenuLink">
                                    <li>
                                        <div class="dropdown-header">
                                            <h4>
                                                <span th:text="#{header.signedInAs}">Signed in as</span>
                                                <i class="login" sec:authentication="name" id="login">
                                                    SomeLogin
                                                </i>
                                            </h4>
                                        </div>
                                    </li>
                                    <li class="dropdown-divider"></li>
                                    <li>
                                        <a class="dropdown-item" href="#"
                                           th:href="@{/user/{login}/settings(login=${#authentication.name})}"
                                           th:text="#{header.settings}">
                                            Settings
                                        </a>
                                    </li>
                                    <li sec:authorize="hasRole('ROLE_ADMIN')">
                                        <a class="dropdown-item" href="#" th:href="@{/administration/user}"
                                           th:text="#{header.administration}">
                                            Administration
                                        </a>
                                    </li>
                                    <li class="dropdown-divider"></li>
                                    <li>
                                        <a class="dropdown-item" href="#" th:href="@{/logout}"
                                           th:text="#{header.logOut}">
                                            Log out
                                        </a>
                                    </li>
                                </ul>
                            </li>

                            <li class="nav-item dropdown" th:with="currentLang=${#locale.language}">
                                <a class="nav-link dropdown-toggle pr-0 py-0 h-100 d-inline-flex align-items-center justify-content-center"
                                   id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                    <img src="../../../pic/flags/en.png" th:src="@{/pic/flags/{name}(name=${currentLang}+'.png')}" alt="Eng"
                                         class="flag"
                                         th:alt="#{header.lang.__${currentLang}__}">
                                </a>
                                <ul class="dropdown-menu dropdown-menu-right inverse-dropdown pull-left align-items-center text-left scroll-after-sm"
                                    aria-labelledby="navbarDropdownMenuLink">
                                    <li th:each="lang : ${new String[]{'uk', 'ru', 'en'}}">
                                        <!--/*@thymesVar id="lang" type="java.lang.String"*/-->
                                        <a href="#" class="dropdown-item" th:href="@{__${url}__(lang=${lang})}">
                                            <div class="row no-gutters">
                                                <div class="col d-flex align-items-center justify-content-center"
                                                     th:text="#{header.lang.__${lang}__}">
                                                    Ukr
                                                </div>
                                                <div class="col-5 text-center">
                                                    <img src="../../../pic/flags/uk.png" alt="Ukr"
                                                         th:src="@{/pic/flags/{name}(name=${lang}+'.png')}" th:alt="#{header.lang.__${lang}__}"
                                                    class="small-flag">
                                                </div>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>


</div>

<div th:replace="fragments/profiles/activeProfile :: bottomScripts" th:remove="tag">
    <!-- jQuery -->
    <script src="../../../libs/jquery/jquery-3.2.1.min.js"></script>

    <!-- Bootstrap JS -->
    <script src="../../../libs/bootstrap/tether-1.3.3/js/tether.min.js"></script>
    <script src="../../../libs/bootstrap/js/bootstrap.min.js"></script>
</div>

</body>
</html>